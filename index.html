<!DOCTYPE html>
<html>

  <head>
    <script src="http://fb.me/react-with-addons-0.10.0.js"></script>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <link rel="stylesheet" href="style.css" />

    <script src="event-emitter.js"></script>
    <script src="game.js"></script>
    <script src="game-data.js"></script>
    <script src="view.js"></script>
    <script src="inventory-view.js"></script>
    <script src="dialog-view.js"></script>
  </head>

  <body>
    <div id="container">
      Loading..
    </div>
    <div id="inventory-container"></div>
    <div id="dialog-container"></div>
    <script>

      var inventoryComponent = React.renderComponent( new InventoryView( { model: model } ), 
          document.getElementById('inventory-container') );
      

      var dialogComponent = React.renderComponent( new DialogView( ), 
          document.getElementById('dialog-container') );


      var view = makeScrollableView( document.getElementById('container'), model, player );


      $( window ).on( "keydown", function( ev ) {

          if ( dialogComponent.hasDialog() && dialogComponent.handleKeyEvent( ev ) ) {
            return true;
          }
          else if ( view.handleKeyEvent( ev ) ) {
            return true;
          }

      });

      function testDialog() {
        
      }

      dialogController.events.on('dialog', function( dialog ) {

        dialogComponent.setProps( { dialog: dialog })

      })
    </script>
  </body>

</html>
